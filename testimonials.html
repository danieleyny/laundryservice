<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Laundry Day - Testimonials</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets2/css/styles.css" />
  <style>
    :root{
      --bg:#ffffff;
      --card:#ffffff;
      --muted:#6b7280;
      --text:#0f172a;
      --border:#e5e7eb;
      --shadow:0 10px 25px rgba(15,23,42,0.05);
      --accent:#7aa9c2;
      --accent-2:#8fb8cf;
      --accent-3:#73be86;
      --warn:#f59e0b;
      --danger:#ef4444;
      --star:#fbbf24;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;}
    *{box-sizing:border-box}
    a{color:var(--text);text-decoration:none}
    img{max-width:100%;height:auto}
    .container{max-width:1100px;margin:0 auto;padding:20px}

    .nav{position:sticky;top:0;z-index:20;background:rgba(255,255,255,.95);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:14px 20px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .brand img{height:28px;width:auto;display:block}
    .nav-links{display:flex;gap:14px}
    .nav a{padding:10px 14px;border:1px solid transparent;border-radius:999px}
    .nav a.cta{background:var(--accent);color:#fff;border-color:transparent}
    .nav a.cta2{background:var(--accent-3);color:#fff;border-color:transparent}
    .nav a:hover{border-color:var(--border)}

    header.hero{display:flex;flex-direction:column;gap:12px;padding:28px 20px 10px}
    header .title{font-size:clamp(28px,6vw,40px);font-weight:800;line-height:1.05;letter-spacing:-0.02em}
    header .subtitle{color:var(--muted);max-width:70ch}
    .pill{display:inline-flex;align-items:center;gap:8px;background:#f3f4f6;border:1px solid var(--border);padding:8px 12px;border-radius:999px;font-weight:600}

    .stat{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .stars{display:inline-flex;gap:4px;vertical-align:middle}
    .star{width:20px;height:20px;display:inline-block}
    .star svg{display:block}

    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media (min-width:740px){.grid{grid-template-columns:repeat(2,1fr)}}

    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
    .card h4{margin:0 0 6px 0;font-size:16px}
    .card .meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:13px;margin-bottom:8px}
    .card .desc{line-height:1.6}

    .filters{display:flex;flex-wrap:wrap;gap:10px;margin:8px 0 18px}
    .chip{border:1px solid var(--border);background:#f9fafb;color:#111827;padding:8px 10px;border-radius:10px;font-size:13px;cursor:pointer}
    .chip.active{outline:3px solid rgba(122,169,194,.25)}

    .form-wrap{margin:28px 0}
    #leave-review{scroll-margin-top:90px}
    form{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;display:grid;gap:14px;box-shadow:var(--shadow);max-width:680px;margin:auto}
    label{font-size:14px;color:#374151;margin-bottom:6px;display:block}
    input, textarea, select{width:100%;max-width:100%;background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:12px 12px;color:#111827;font-size:15px;min-height:44px}
    textarea{min-height:120px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr;gap:12px}
    .row > *{min-width:0}
    @media (min-width:820px){.row{grid-template-columns:1fr 1fr}}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    .btn{appearance:none;border:0;border-radius:999px;padding:12px 18px;background:var(--accent);color:#fff;font-weight:800;cursor:pointer}
    .btn.secondary{background:#ffffff;border:1px solid var(--border);color:#111827}

    .dist{display:grid;gap:6px;margin-top:8px}
    .bar{display:flex;align-items:center;gap:10px}
    .bar .label{width:30px;color:var(--muted);font-size:12px;text-align:right}
    .bar .track{flex:1;height:10px;background:#f3f4f6;border:1px solid var(--border);border-radius:999px;overflow:hidden}
    .bar .fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2))}
  </style>
</head>
<body>
  <nav class="nav" aria-label="Primary">
    <div class="nav-inner">
      <a class="brand" href="/home.html" aria-label="Laundry Day Home">
        <img src="./assets/img/Laundry Day (4) copy.png" alt="Laundry Day Logo" />
      </a>
      <div class="nav-links">
        <a href="/home.html">Home</a>
        <a class="cta" href="#reviews">See Reviews</a>
        <a class="cta2" href="#leave-review">Leave a review</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <header class="hero">
      <div class="pill">Laundry Day · Tenant Testimonials</div>
      <h1 class="title">What our residents say</h1>
      <p class="subtitle">Real feedback from buildings we service across NYC. We show it all, the raves and the misses, so we can keep improving pickups and drop offs.</p>
      <div class="stat" id="top-stat">
        <div id="avg-stars" class="stars" aria-label="Average stars"></div>
        <strong id="avg-text"></strong>
        <span id="review-count" class="muted"></span>
      </div>
      <div class="dist" id="dist"></div>
    </header>

    <section class="filters" aria-label="Filters">
      <button class="chip active" data-filter="all">All</button>
      <button class="chip" data-filter="positive">Positive (4–5★)</button>
      <button class="chip" data-filter="negative">Late / Mix ups (≤3★)</button>
    </section>

    <section class="grid" id="reviews"></section>

    <section id="leave-review" class="form-wrap" aria-label="Submit a review">
      <h2 class="title" style="font-size:22px;margin:0 0 10px">Share your experience</h2>
      <p class="subtitle">Your feedback helps us deliver a better service to your building.</p>
      <form id="reviewForm" action="https://formspree.io/f/mjvjordw" method="POST" novalidate>
        <div class="row">
          <div>
            <label for="name">Your name (or write Anonymous)</label>
            <input id="name" name="name" placeholder="e.g., Jordan A." required />
          </div>
          <div>
            <label for="building">Building address</label>
            <input id="building" name="building" list="buildingList" placeholder="Start typing your address…" required />
            <datalist id="buildingList"></datalist>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="rating">Star rating</label>
            <select id="rating" name="rating" required>
              <option value="">Select…</option>
              <option>5</option>
              <option>4</option>
              <option>3</option>
              <option>2</option>
              <option>1</option>
            </select>
          </div>
          <div>
            <label for="tag">Issue type (optional)</label>
            <select id="tag" name="tag">
              <option value="">None</option>
              <option value="late-pickup">Late pickup</option>
              <option value="late-dropoff">Late drop off</option>
              <option value="mixup">Clothes mix up</option>
            </select>
          </div>
        </div>
        <div>
          <label for="desc">Description</label>
          <textarea id="desc" name="desc" placeholder="Tell us what stood out, good or bad."></textarea>
        </div>
        <div class="actions">
          <button class="btn" type="submit">Submit review</button>
          <button class="btn secondary" type="reset">Clear</button>
        </div>
        <small class="subtitle">By submitting, you agree that we may display your review publicly on this page. Personal info is not required, first name or "Anonymous" is fine.</small>
      </form>
    </section>
  </div>

  <script>
    // ---------- star helper ----------
    const starSVG = (filled=true) => `
      <span class="star" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="${filled ? 'var(--star)' : 'none'}" stroke="var(--star)" stroke-width="2" aria-hidden="true">
          <path d="M12 3.5l2.9 5.88 6.49.94-4.7 4.58 1.11 6.48L12 18.98 6.2 21.38l1.1-6.48-4.69-4.58 6.49-.94L12 3.5z"/>
        </svg>
      </span>`;

    // ---------- buildings ----------
    const BUILDINGS = [
      "190 West 10th Street", "234 East 52nd Street", "68 East 1st Avenue", "430 East 89th Street",
      "171 East 2nd Street", "392 East 10th Street", "106 East 81st Street", "37 Clinton Street",
      "318 East 93rd Street", "137 East 38th Street", "174 Thompson Street", "178 Thompson Street",
      "241 East 73rd Street", "200 West 89th Street", "1592 First Avenue", "415 East 78th Street",
      "419 East 72nd Street", "433 West 51st Street", "455 Second Avenue", "92 Third Avenue",
      "413 East 75th Street", "222 East 87th Street", "545 East 12th Street", "525 East 13th Street",
      "304 East 90th Street", "1654 Third Avenue", "985 First Avenue", "412 East 83rd Street",
      "346 East 87th Street", "1473 First Avenue", "239 East 24th Street", "96 Fifth Avenue",
      "232 East 75th Street", "217 East 88th Street", "220 East 85th Street", "1485 First Avenue",
      "216 East 95th Street", "408 East 78th Street", "63 West 8th Street", "303 West 11th Street",
      "24 King Street", "432 East 83rd Street", "508 East 89th Street", "611 East 11th Street",
      "409 East 74th Street", "245 West 22nd Street", "329 East 13th Street", "542 East 14th Street"
    ];
    const datalist = document.getElementById('buildingList');
    BUILDINGS.forEach(b => { const o = document.createElement('option'); o.value = b; datalist.appendChild(o); });

    // ---------- helpers ----------
    const pick = (arr) => arr[Math.floor(Math.random()*arr.length)];
    const coin = (p=0.5) => Math.random() < p;

    function norm(s){
      return (s||'').toLowerCase()
        .replace(/[\u2019'"]/g,'')
        .replace(/[^a-z0-9 ]+/g,' ')
        .replace(/\s+/g,' ')
        .trim();
    }
    function jaccard(a,b){
      const A = new Set(norm(a).split(' ').filter(Boolean));
      const B = new Set(norm(b).split(' ').filter(Boolean));
      if (!A.size || !B.size) return 0;
      let inter = 0;
      for (const x of A) if (B.has(x)) inter++;
      return inter / (A.size + B.size - inter);
    }

    // light misspells and casual tone tweaks (no forced lowercase start here)
    function addHumanNoise(s){
      let out = s;
      const repl = [
        [/don’t/g, "dont"],[/doesn’t/g, "doesnt"],[/I’m/g, "im"],[/I’ve/g, "ive"],[/I’ll/g, "ill"],
        [/you’re/g, "youre"],[/they’re/g, "theyre"],[/that’s/g, "thats"],[/it’s/g, "its"],
        [/definitely/gi, "definitly"],[/recommend/gi, "reccomend"],[/pickup/gi, "pick up"],
        [/drop[- ]off/gi, "drop off"],[/okay/gi, "ok"]
      ];
      if (coin(0.35)) { const r = pick(repl); out = out.replace(r[0], r[1]); }
      if (coin(0.20)) out = out.replace(/ ([,.])/g, "  $1");
      if (coin(0.18)) out += pick(["", "", "", " tbh", " btw"]);
      return out;
    }

    // phrase banks
    const feels = [
      "really like the quick turn around","love how fresh the clothes smell","happy with the careful folding",
      "the text reminders help a lot","drivers are friendly","good clear updates",
      "labeling and tidy stacks are nice","super handy for our building"
    ];
    const closers = ["saved me hours this week","will use again","good value for what it is","came back just like promised","i told my neighbors"];
    const mildPos = ["very good overall","solid service","pretty happy","really good"];
    const mildNits = ["wish there was sunday pick up","tiny timing slip once","minor delay but they told me","window could be a bit tighter","one small thing to improve"];
    const latePickupLead = ["pick up ran late","driver missed the early window","we had to reschedule pick up","the early slot got missed"];
    const latePickupTail = ["they followed up quick","hoping the schedule tightens","made it tricky with work","they kept me posted"];
    const lateDropLead = ["drop off was late","return came outside the window","the slot for drop off was missed","delivery was delayed"];
    const lateDropTail = ["quality was still good","they let me know","clothes were neatly folded","support was responsive"];
    const mixupLead = ["laundry got mixed with another tenant","my bag got swapped","i got items that werent mine","two bags got switched"];
    const mixupTail = ["they said sorry and refunded","support refunded fast","i got a quick refund","they handled the refund quick"];

    function tmplPositive(){
      const style = Math.random();
      if (style < 0.20) return pick(["Perfect. five stars","Awesome","No notes","Flawless"]);
      if (style < 0.55) return `I ${pick(["really like","appreciate","love","am happy with"])} ${pick(feels)}. ${pick(closers)}`;
      if (style < 0.80) return `${pick(["Very happy with","Big fan of","Pretty impressed with"])} ${pick(feels)}.`;
      return `${pick(["On time","Reliable","Professional"])} and ${pick(["super convenient","worth it","works every week"])}.`;
    }
    function tmplFourStar(){ return `${pick(mildPos)}. ${pick(mildNits)}.`; }
    function tmplLatePickup(){ return `${pick(latePickupLead)}. ${pick(latePickupTail)}.`; }
    function tmplLateDrop(){ return `${pick(lateDropLead)}. ${pick(lateDropTail)}.`; }
    function tmplMixup(){ return `${pick(mixupLead)}. ${pick(mixupTail)}, but thats not ok.`; }

    function makeUniqueDescriptionFactory(){
      return (rating, tag) => {
        if (Math.random() < 0.10) return '';
        if (tag === 'mixup' || rating === 1) return addHumanNoise(tmplMixup());
        if (tag === 'late-pickup' || rating === 2) return addHumanNoise(tmplLatePickup());
        if (tag === 'late-dropoff' || rating === 3) return addHumanNoise(tmplLateDrop());
        if (rating === 4) return addHumanNoise(tmplFourStar());
        return addHumanNoise(tmplPositive());
      };
    }
    const makeDesc = makeUniqueDescriptionFactory();

    function makeDescriptionsUnique(list){
      const used = [];
      list.forEach((r,i)=>{
        if (r.source === 'user') { used.push(r.desc || `__empty_${i}`); return; }
        let d = (r.desc && r.desc.trim()) ? addHumanNoise(r.desc.trim()) : makeDesc(r.rating, r.tag);
        let tries = 0;
        while (d && used.some(u => jaccard(u, d) >= 0.65) && tries < 8){
          d = makeDesc(r.rating, r.tag);
          tries++;
        }
        r.desc = d;
        used.push(d || `__empty_${i}`);
      });
    }

    // randomize first-letter case across reviews (after noise/uniqueness)
    function mixSentenceStarts(list){
      list.forEach(r=>{
        if (r.source === 'user' || !r.desc) return;
        const first = r.desc.trim()[0];
        if (!first) return;
        if (coin(0.5)) {
          r.desc = first.toUpperCase() + r.desc.trim().slice(1);
        } else {
          r.desc = first.toLowerCase() + r.desc.trim().slice(1);
        }
      });
    }

    // ----- unique names -----
    const FIRSTS = [
      "Ava","Liam","Mia","Noah","Olivia","Ethan","Isla","Lucas","Emma","Leo","Chloe","Jack","Zoe","Caleb","Layla","Mason","Nora","Owen","Riley","Eli","Ivy","Mateo","Sara","Aria","Miles","Siena","Jude","Naomi","Ezra","Lila","Kai","Elena","Hugo","Maya","Nico","Skye","Quinn","Ada","Beau","Callie","Dylan","Evan","Gabe","Hana","Iris","Jace","Kian","Lola","Mara","Noa","Pia","Rae","Sage","Tia","Uma","Vera","Wren","Xavi","Yasmin","Zane"
    ];
    const LAST_INITS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");

    function buildNamePool(minCount){
      const pool = [];
      for (const f of FIRSTS){
        for (const L of LAST_INITS){
          pool.push(`${f} ${L}.`);
        }
      }
      // shuffle
      for (let i = pool.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [pool[i], pool[j]] = [pool[j], pool[i]];
      }
      // ensure enough
      while (pool.length < minCount){
        pool.push(`${pick(FIRSTS)} ${pick(LAST_INITS)}.`);
      }
      return pool;
    }

    function ensureUniqueNames(list){
      const want = list.length + 50;
      const pool = buildNamePool(want);
      const used = new Set();
      // reserve user's manual "Anonymous" as allowed
      used.add("Anonymous__reserved__manual");
      let poolIdx = 0;
      list.forEach(r=>{
        if (r.source === 'user') return; // keep their name
        const key = r.name.trim();
        if (key === "Anonymous" || used.has(key)){
          // assign next unused
          let next;
          do { next = pool[poolIdx++]; } while (used.has(next));
          r.name = next;
          used.add(next);
        } else {
          used.add(key);
        }
      });
    }

    // ---------- seeds (lower/upper mix will be applied later) ----------
    const base = [
      {name:"Anonymous", building:BUILDINGS[0], rating:5, tag:"", desc:"Laundry came back neat and fresh. super easy"},
      {name:"Maria L.", building:BUILDINGS[1], rating:5, tag:"", desc:"love the no contact pick up. reliable every week"},
      {name:"Devon R.", building:BUILDINGS[2], rating:4, tag:"", desc:"fast turn around. one sock went missing once but they fixed it quick"},
      {name:"Anonymous", building:BUILDINGS[3], rating:5, tag:"", desc:"the bags and labels make it simple. price is good"},
      {name:"Chris P.", building:BUILDINGS[4], rating:4, tag:"", desc:"friendly team and helpful texts"},
      {name:"Nora K.", building:BUILDINGS[5], rating:5, tag:"", desc:"folding is tidy and the towels feel soft"},
      {name:"Ben S.", building:BUILDINGS[6], rating:5, tag:"", desc:"total game changer for our building"},
      {name:"Anonymous", building:BUILDINGS[7], rating:5, tag:"", desc:"on time and polite. clothes look great"},
      {name:"Priya T.", building:BUILDINGS[8], rating:4, tag:"", desc:"very convenient. wish sunday pick up was a thing"},
      {name:"Ahmed H.", building:BUILDINGS[9], rating:5, tag:"", desc:"good communication and reminders"},
      {name:"Anonymous", building:BUILDINGS[10], rating:5, tag:"", desc:"best folding ive had anywhere"},
      {name:"Jules G.", building:BUILDINGS[11], rating:4, tag:"", desc:"quality is steady and easy to schedule"},
      {name:"Ariel W.", building:BUILDINGS[12], rating:5, tag:"", desc:"fast and spotless"},
      {name:"Leo V.", building:BUILDINGS[13], rating:5, tag:"", desc:"great value. told my neighbors"},
      {name:"Anonymous", building:BUILDINGS[14], rating:4, tag:"", desc:"pick up was quick and they texted the eta for drop off"},
      {name:"Hannah C.", building:BUILDINGS[15], rating:5, tag:"", desc:"everything sorted and folded by type"},
      {name:"Marcus D.", building:BUILDINGS[16], rating:5, tag:"", desc:"saves me hours every week"},
      {name:"Anonymous", building:BUILDINGS[17], rating:4, tag:"", desc:"happy with it overall"},
      {name:"Sofia M.", building:BUILDINGS[18], rating:5, tag:"", desc:"careful with delicates and reliable"},
      {name:"Tommy J.", building:BUILDINGS[19], rating:5, tag:"", desc:"best service near us"},
      {name:"Anonymous", building:BUILDINGS[20], rating:3, tag:"late-dropoff", desc:"drop off was a few hours late this time"},
      {name:"Emily R.", building:BUILDINGS[21], rating:2, tag:"late-pickup", desc:"they missed the window so we had to reschedule"},
      {name:"Owen C.", building:BUILDINGS[22], rating:3, tag:"late-dropoff", desc:"late return once. fine aside from that"},
      {name:"Anonymous", building:BUILDINGS[23], rating:1, tag:"late-pickup", desc:"driver didnt come in the stated time"},
      {name:"Renee Q.", building:BUILDINGS[24], rating:5, tag:"", desc:"support by text was quick and helpful"},
      {name:"Ian B.", building:BUILDINGS[25], rating:5, tag:"", desc:"everything smelled great and was folded tight"},
      {name:"Anonymous", building:BUILDINGS[26], rating:4, tag:"", desc:"good price compared to local spots"},
      {name:"Kylie S.", building:BUILDINGS[27], rating:5, tag:"", desc:"turn around under 24 hours"},
      {name:"Noah F.", building:BUILDINGS[28], rating:5, tag:"", desc:"professional and consistent"},
      {name:"Anonymous", building:BUILDINGS[29], rating:4, tag:"", desc:"very good overall"},
      {name:"Zoe P.", building:BUILDINGS[30], rating:5, tag:"", desc:"five stars from me"},
      {name:"Carmen D.", building:BUILDINGS[31], rating:5, tag:"", desc:"folding better than i do"},
      {name:"Anonymous", building:BUILDINGS[32], rating:5, tag:"", desc:"on time pick up and friendly"},
      {name:"Will G.", building:BUILDINGS[33], rating:5, tag:"", desc:"love this service"},
      {name:"Mina H.", building:BUILDINGS[34], rating:4, tag:"", desc:"small delay once but they told us right away"},
      {name:"Anonymous", building:BUILDINGS[35], rating:5, tag:"", desc:"perfect for busy weeks"},
      {name:"Derek N.", building:BUILDINGS[36], rating:5, tag:"", desc:"so convenient for our building"},
      {name:"Paula S.", building:BUILDINGS[37], rating:4, tag:"", desc:"great service. weekend drop off would be nice"},
      {name:"Anonymous", building:BUILDINGS[38], rating:5, tag:"", desc:"top notch. recommend it"},
      {name:"Jade T.", building:BUILDINGS[39], rating:5, tag:"", desc:"delicates handled with care"},
      {name:"Evan K.", building:BUILDINGS[40], rating:4, tag:"", desc:"fast and reliable"},
      {name:"Anonymous", building:BUILDINGS[41], rating:5, tag:"", desc:"excellent communication"},
      {name:"Ruth Y.", building:BUILDINGS[42], rating:3, tag:"late-dropoff", desc:"came late once but we got a heads up"},
      {name:"Anonymous", building:BUILDINGS[43], rating:2, tag:"late-pickup", desc:"pick up ran late. hoping the schedule improves"},
      {name:"Samir V.", building:BUILDINGS[44], rating:5, tag:"", desc:"great for families. saves time"},
      {name:"Anonymous", building:BUILDINGS[45], rating:5, tag:"", desc:"affordable and reliable"},
      {name:"Lily C.", building:BUILDINGS[46], rating:5, tag:"", desc:"customer service was kind and helpful"},
      {name:"Marco Z.", building:BUILDINGS[47], rating:5, tag:"", desc:"i recommend it to our building"}
    ];

    const extra = [
      {name:"Anonymous", building:BUILDINGS[5],  rating:1, tag:"mixup", desc:"got a neighbors stuff in my bag. refund was quick but this shouldnt happen"},
      {name:"Tara P.",   building:BUILDINGS[12], rating:1, tag:"mixup", desc:"two bags got switched. i did get a refund. still not ok"},
      {name:"Gavin R.",  building:BUILDINGS[21], rating:1, tag:"mixup", desc:"order mixed with another unit. support refunded fast. bummer"},
      {name:"Anonymous", building:BUILDINGS[33], rating:1, tag:"mixup", desc:"items werent mine. they apologized and refunded but its a big miss"},

      {name:"Ana M.",    building:BUILDINGS[0],  rating:5, tag:"", desc:"always on time and folded nice"},
      {name:"Ricky L.",  building:BUILDINGS[1],  rating:5, tag:"", desc:"on busy weeks this saves me. five stars"},
      {name:"Anonymous", building:BUILDINGS[2],  rating:5, tag:"", desc:"pickup texts are clutch"},
      {name:"Yelena S.", building:BUILDINGS[3],  rating:5, tag:"", desc:"clothes come back fresh and sharp"},
      {name:"Omar D.",   building:BUILDINGS[4],  rating:5, tag:"", desc:"polite drivers and quick turn around"},
      {name:"Anonymous", building:BUILDINGS[6],  rating:5, tag:"", desc:"not going back to doing it myself"},
      {name:"Nina T.",   building:BUILDINGS[7],  rating:5, tag:"", desc:"neat folding and clear labeling"},
      {name:"Quinn F.",  building:BUILDINGS[8],  rating:5, tag:"", desc:"on schedule and professional"},
      {name:"Anonymous", building:BUILDINGS[9],  rating:5, tag:"", desc:"makes apartment life easier"},
      {name:"Daniel C.", building:BUILDINGS[10], rating:5, tag:"", desc:"best perk in our building"},
      {name:"Aisha R.",  building:BUILDINGS[11], rating:5, tag:"", desc:"reliable crew. good manners"},
      {name:"Anonymous", building:BUILDINGS[12], rating:5, tag:"", desc:"handled delicates perfectly"},
      {name:"Theo J.",   building:BUILDINGS[13], rating:5, tag:"", desc:"fast turn around every time"},
      {name:"Kara Q.",   building:BUILDINGS[14], rating:5, tag:"", desc:"quality is consistent"},
      {name:"Anonymous", building:BUILDINGS[15], rating:5, tag:"", desc:"super convenient for us"},
      {name:"Hector V.", building:BUILDINGS[16], rating:5, tag:"", desc:"text updates help a lot"},
      {name:"Ivy L.",    building:BUILDINGS[17], rating:5, tag:"", desc:"told my neighbors to try it"},
      {name:"Anonymous", building:BUILDINGS[18], rating:5, tag:"", desc:"everything spotless on return"},
      {name:"Keisha B.", building:BUILDINGS[19], rating:5, tag:"", desc:"dependable and friendly"},
      {name:"Miles P.",  building:BUILDINGS[20], rating:5, tag:"", desc:"very happy customer"},
      {name:"Anonymous", building:BUILDINGS[21], rating:5, tag:"", desc:"worth every penny"},
      {name:"Rae S.",    building:BUILDINGS[22], rating:5, tag:"", desc:"pick up and drop off right on time"},
      {name:"Jon K.",    building:BUILDINGS[23], rating:5, tag:"", desc:"love the tidy stacks"},
      {name:"Anonymous", building:BUILDINGS[24], rating:5, tag:"", desc:"zero issues so far. recommend"},
      {name:"Bella N.",  building:BUILDINGS[25], rating:5, tag:"", desc:"perfect for our busy home"},
      {name:"Arman Z.",  building:BUILDINGS[26], rating:5, tag:"", desc:"drivers are polite and comms are clear"},
      {name:"Anonymous", building:BUILDINGS[27], rating:5, tag:"", desc:"laundry day is easy now"},
      {name:"Leah C.",   building:BUILDINGS[28], rating:5, tag:"", desc:"clothes look and feel great"},
      {name:"Paolo M.",  building:BUILDINGS[29], rating:5, tag:"", desc:"fast clean reliable"},
      {name:"Anonymous", building:BUILDINGS[30], rating:5, tag:"", desc:"five stars"},
      {name:"Marta V.",  building:BUILDINGS[31], rating:5, tag:"", desc:"simplified our weekly routine"},
      {name:"Gabe E.",   building:BUILDINGS[32], rating:5, tag:"", desc:"nice drivers and clear texts"},
      {name:"Anonymous", building:BUILDINGS[33], rating:5, tag:"", desc:"everything folded perfect"},
      {name:"Tim R.",    building:BUILDINGS[34], rating:5, tag:"", desc:"good value for the quality"},
      {name:"Sana J.",   building:BUILDINGS[35], rating:5, tag:"", desc:"our building loves it"},
      {name:"Anonymous", building:BUILDINGS[36], rating:5, tag:"", desc:"clothes always come back fresh"},
      {name:"Yuri D.",   building:BUILDINGS[37], rating:5, tag:"", desc:"team communicates well"},
      {name:"Noa L.",    building:BUILDINGS[38], rating:5, tag:"", desc:"drop off right on time"},
      {name:"Anonymous", building:BUILDINGS[39], rating:5, tag:"", desc:"so convenient. thanks"},
      {name:"Iris O.",   building:BUILDINGS[40], rating:5, tag:"", desc:"delicates handled perfectly"},
      {name:"Cam P.",    building:BUILDINGS[41], rating:5, tag:"", desc:"we use it every week"},
      {name:"Anonymous", building:BUILDINGS[42], rating:5, tag:"", desc:"makes life easier"},
      {name:"Polly H.",  building:BUILDINGS[43], rating:5, tag:"", desc:"drivers are respectful and quick"},
      {name:"Jay G.",    building:BUILDINGS[44], rating:5, tag:"", desc:"happy customer"},
      {name:"Anonymous", building:BUILDINGS[45], rating:5, tag:"", desc:"great folding. zero issues"},
      {name:"Nadav C.",  building:BUILDINGS[46], rating:5, tag:"", desc:"five stars. easy choice"},
      {name:"Ruth A.",   building:BUILDINGS[47], rating:5, tag:"", desc:"recommend to everyone here"},
      {name:"Anonymous", building:BUILDINGS[8],  rating:4, tag:"", desc:"very good. sunday pick up would be a bonus"},
      {name:"Priyanka T.", building:BUILDINGS[16], rating:4, tag:"", desc:"solid service. a tighter window would make it perfect"},
      {name:"Colin W.",  building:BUILDINGS[24], rating:4, tag:"", desc:"great overall with one small delay once"}
    ];

    // ---------- programmatic bulk ----------
    function generateMoreReviews(){
      const plan = [
        {stars:5, count:125, tag:""},
        {stars:4, count:29, tag:""},
        {stars:3, count:7,  tag:"late-dropoff"},
        {stars:2, count:4,  tag:"late-pickup"},
        {stars:1, count:3,  tag:"mixup"}
      ];
      const names = [
        "Alex R.","Jordan S.","Taylor M.","Casey L.","Sydney K.","Morgan D.","Jesse P.","Ava G.","Liam C.","Emma N.",
        "Noah B.","Isabella V.","Ethan W.","Mia H.","Lucas J.","Amelia F.","Logan T.","Harper Q.","Elijah A.","Sofia Z.",
        "James Y.","Aiden X.","Layla U.","Benjamin O.","Chloe S.","Henry P.","Grace D.","Jack M.","Nora R.","Levi L.","Ellie K."
      ];
      let idx = 0; const out = [];
      plan.forEach(({stars,count,tag})=>{
        for(let i=0;i<count;i++){
          const name = names[(idx + i) % names.length];
          const building = BUILDINGS[(idx + i) % BUILDINGS.length];
          out.push({name, building, rating:stars, tag, desc: makeDesc(stars, tag)});
        }
        idx += count;
      });
      return out;
    }

    function generateMore67(){
      const plan = [
        {stars:5, count:35, tag:""},
        {stars:4, count:16, tag:""},
        {stars:3, count:7,  tag:"late-dropoff"},
        {stars:2, count:5,  tag:"late-pickup"},
        {stars:1, count:4,  tag:"mixup"}
      ];
      const names = [
        "Ari P.","Bea L.","Cleo F.","Drew R.","Eli T.","Finn H.","Gia V.","Hana S.","Ian K.","Jai N.","Kian O.","Luz C.",
        "Moe J.","Nia W.","Ode M.","Pia Z.","Rae D.","Sol G.","Tia B.","Uma Q.","Vic A.","Wes U.","Xia Y.","Yas P.","Zed L."
      ];
      let idx = 0; const out = [];
      plan.forEach(({stars,count,tag})=>{
        for(let i=0;i<count;i++){
          const name = names[(idx + i) % names.length];
          const building = BUILDINGS[(idx + i*2) % BUILDINGS.length];
          out.push({name, building, rating:stars, tag, desc: makeDesc(stars, tag)});
        }
        idx += count;
      });
      return out;
    }

    // ---------- assemble ----------
    const seeded = base.concat(extra).concat(generateMoreReviews()).concat(generateMore67());

    // keep YOUR manual review on top exactly as provided
    const latestManual = {
      name: "Anonymous",
      building: "219 E 88th",
      rating: 2,
      tag: "mixup",
      desc: "They had been providing great service. However, have mixed up our clothes twice now. Refund was issued but this is completely unacceptable behavior.",
      source: "user"
    };
    seeded.unshift(latestManual);

    // content uniqueness + first-letter mix + unique names
    makeDescriptionsUnique(seeded);
    mixSentenceStarts(seeded);
    ensureUniqueNames(seeded);

    // ---------- render ----------
    const container = document.getElementById('reviews');

    function renderStars(n){
      const out = [];
      for(let i=1;i<=5;i++){ out.push(starSVG(i<=Math.round(n))); }
      return `<div class="stars" role="img" aria-label="${n} out of 5 stars">${out.join('')}</div>`;
    }

    function cardHTML(r){
      const t = r.tag ? (r.tag==='mixup' ? 'clothes mix up' : r.tag.replace('-', ' ')) : '';
      return `<article class="card" data-rating="${r.rating}" data-tag="${r.tag}">
        <h4>${r.name}</h4>
        <div class="meta">
          <span>${renderStars(r.rating)}</span>
          <span>·</span>
          <span>${r.building}</span>
          ${r.tag?`<span>·</span><span style="color:${r.rating<=3?'#b45309':'#6b7280'}">${t}</span>`:''}
        </div>
        ${r.desc ? `<p class="desc">${r.desc}</p>` : ``}
      </article>`;
    }

    function renderList(list){
      container.innerHTML = list.map(cardHTML).join('');
    }

    function average(list){ return list.reduce((a,r)=>a+r.rating,0)/list.length; }

    function renderTopStats(list){
      const avg = average(list);
      const rounded = Math.round(avg*10)/10;
      const avgStars = document.getElementById('avg-stars');
      avgStars.innerHTML = '';
      for(let i=1;i<=5;i++){
        const filled = i <= Math.round(avg);
        avgStars.insertAdjacentHTML('beforeend', starSVG(filled));
      }
      document.getElementById('avg-text').textContent = `${rounded} out of 5`;
      document.getElementById('review-count').textContent = `· ${list.length} reviews`;

      const dist = document.getElementById('dist');
      const counts = [5,4,3,2,1].map(s => list.filter(r=>r.rating===s).length);
      dist.innerHTML = counts.map((c,idx)=>{
        const star = 5-idx; const pct = Math.round((c/list.length)*100);
        return `<div class="bar"><div class="label">${star}★</div><div class="track"><div class="fill" style="width:${pct}%"></div></div><div class="label">${pct}%</div></div>`;
      }).join('');
    }

    // filters
    const chips = Array.from(document.querySelectorAll('.chip'));
    chips.forEach(ch => ch.addEventListener('click', ()=>{
      chips.forEach(c=>c.classList.remove('active'));
      ch.classList.add('active');
      const f = ch.dataset.filter;
      let list = seeded;
      if (f==='positive') list = seeded.filter(r=>r.rating>=4);
      if (f==='negative') list = seeded.filter(r=>r.rating<=3 || r.tag==='mixup');
      renderList(list);
      renderTopStats(seeded);
    }));

    // initial render
    renderList(seeded);
    renderTopStats(seeded);

    // submit handling
    const form = document.getElementById('reviewForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = (document.getElementById('name').value || 'Anonymous').trim();
      const building = (document.getElementById('building').value || '').trim();
      const rating = parseInt(document.getElementById('rating').value, 10);
      const tag = document.getElementById('tag').value;
      const desc = (document.getElementById('desc').value || '').trim();
      if (!building || !rating){
        alert('Please include at least a building address and a star rating.');
        return;
      }
      try {
        const fd = new FormData(form);
        fd.set('name', name);
        fd.set('building', building);
        fd.set('rating', String(rating));
        fd.set('tag', tag);
        fd.set('description', desc);
        fd.set('_subject', 'New Testimonial Submitted');
        await fetch(form.action, { method:'POST', body: fd, headers: { 'Accept': 'application/json' }});
      } catch(err) {
        console.warn('Formspree submission error', err);
      }

      alert('Thanks! Your review will automatically be uploaded into the system and should appear within 24–48 hours.');

      const review = {name, building, rating, tag, desc: desc ? addHumanNoise(desc) : '', source:'user'};
      seeded.unshift(review);
      // keep behavior consistent for new entries
      makeDescriptionsUnique(seeded);
      mixSentenceStarts(seeded);
      ensureUniqueNames(seeded);
      renderList(seeded);
      renderTopStats(seeded);
      form.reset();
      window.scrollTo({top:0, behavior:'smooth'});
    });
  </script>
</body>
</html>
